"use strict";(self.webpackChunkismile_electron=self.webpackChunkismile_electron||[]).push([[406],{406:(ve,D,d)=>{d.r(D),d.d(D,{AuthorizationModule:()=>ke});var N=d(8692),M=d(36),e=d(4537),z=d(1990),B=d(5998),H=d(3582),T=d(4083),P=d(1782),S=d(8659),F=d(9665),$=d(9638),j=d(3331),m=d(92);function Q(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Email Is Required")))}function W(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Must Be A Valid Email")))}function G(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Password Is Required")))}let K=(()=>{class i{constructor(t,s,a,n,h,g){this.authService=t,this.titleService=s,this.toastrService=a,this.router=n,this.cookieService=h,this.translateService=g,this.hide=!0,this.userData={},this.cookieService.get("userToken")&&this.router.navigate(["orders","orders-list"]),this.titleService.setTitle(`iSmile - ${this.translateService.instant("SignIn")}`),this.submitData=new e.vpe}ngOnInit(){}onSubmit(){this.submitData.emit(this.authService.loginForm),this.sub=this.authService.login().subscribe(t=>{t.needChange?(this.cookieService.set("newPass","true",void 0,"/"),this.toastrService.showError("expired password, please create new password","Create new password"),this.router.navigate(["authorization","new-password"])):"successful"===t.message&&(this.userData=t,this.cookieService.set("fName",this.userData.fName,void 0,"/"),this.cookieService.set("lName",this.userData.lName,void 0,"/"),this.cookieService.set("userToken",this.userData.token,void 0,"/"),this.cookieService.set("userCNId",this.userData.userCNId.toString(),void 0,"/"),this.toastrService.showSuccess(`${this.translateService.instant("Welcome")} ${this.userData.fName} ${this.userData.lName}`,this.translateService.instant("In iSmileOn")),this.router.navigate(["orders","orders-list"]))},t=>{t.error.message.includes("Wrong username or password")?this.toastrService.showError(this.translateService.instant("Error"),this.translateService.instant("Wrong username or password")):this.toastrService.showError(this.translateService.instant("Error"),this.translateService.instant("Error Happened"))})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(z.e),e.Y36(B.Dx),e.Y36(H._),e.Y36(M.F0),e.Y36(T.N),e.Y36(P.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sign-in"]],outputs:{submitData:"submitData"},decls:35,vars:26,consts:[[1,"shell-login"],[1,"container-login","animated","fadeIn",2,"position","relative"],[1,"pt-5","d-flex","justify-content-center"],["src","assets/ismileico.png",1,"pt-5"],[1,"login-form-container"],[1,"d-flex","flex-column",3,"submit"],["loginForm","ngForm"],[1,"pt-4","pb-0"],[1,"pt-0","pb-2"],["appearance","outline"],["matInput","","id","name","name","name","ngvemail","","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],[4,"ngIf"],["matInput","","id","password","name","password","placeholder","Enter your Password","required","",3,"ngModel","type","ngModelChange"],["password","ngModel"],["matSuffix","",2,"cursor","pointer",3,"click"],[1,"d-flex","align-item-center","justify-content-center"],["mat-button","","id","login","type","submit",1,"btn-material","btn","shift-submit","mt-3",3,"disabled"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"form",5,6),e.NdJ("submit",function(){return s.onSubmit()}),e.TgZ(7,"h4",7),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"h5",8),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"mat-form-field",9)(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",10,11),e.NdJ("ngModelChange",function(n){return s.authService.loginForm.name=n}),e.ALo(19,"translate"),e.qZA(),e.YNc(20,Q,3,3,"mat-error",12),e.YNc(21,W,3,3,"mat-error",12),e.qZA(),e.TgZ(22,"mat-form-field",9)(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"input",13,14),e.NdJ("ngModelChange",function(n){return s.authService.loginForm.password=n}),e.qZA(),e.TgZ(28,"mat-icon",15),e.NdJ("click",function(){return s.hide=!s.hide}),e._uU(29),e.qZA(),e.YNc(30,G,3,3,"mat-error",12),e.qZA(),e.TgZ(31,"div",16)(32,"button",17),e._uU(33),e.ALo(34,"translate"),e.qZA()()()()()()),2&t){const a=e.MAs(6),n=e.MAs(18),h=e.MAs(27);e.xp6(8),e.Oqu(e.lcZ(9,14,"Login To Your Account")),e.xp6(3),e.Oqu(e.lcZ(12,16,"Enter your connect credentials")),e.xp6(4),e.Oqu(e.lcZ(16,18,"Enter your Email")),e.xp6(2),e.s9C("placeholder",e.lcZ(19,20,"Enter your Email")),e.Q6J("ngModel",s.authService.loginForm.name),e.xp6(3),e.Q6J("ngIf",null==n.errors?null:n.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.email),e.xp6(3),e.Oqu(e.lcZ(25,22,"Enter your Password")),e.xp6(2),e.Q6J("ngModel",s.authService.loginForm.password)("type",s.hide?"password":"text"),e.xp6(3),e.hij(" ",s.hide?"visibility_off":"visibility"," "),e.xp6(1),e.Q6J("ngIf",null==h.errors?null:h.errors.required),e.xp6(2),e.Q6J("disabled",!a.valid),e.xp6(1),e.hij(" ",e.lcZ(34,24,"Login")," ")}},dependencies:[N.O5,S.TO,S.KE,S.hX,S.R9,F.Nt,$.lW,j.Hw,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.On,m.F,P.X$],styles:[".shell-login[_ngcontent-%COMP%]{min-height:100vh;border:1px solid rgb(215,215,215);display:flex;color:#434c5f;padding:2rem;flex-direction:column;justify-content:center;align-items:center}.shell-login[_ngcontent-%COMP%] > .logo-login[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0}.shell-login[_ngcontent-%COMP%] > .container-login[_ngcontent-%COMP%]{color:#000!important;background-color:#fff;border-radius:14px;box-shadow:0 1px 1px #3c404314,0 1px 3px 1px #3c404329;margin-top:30px;display:flex;flex-direction:column;width:550px}.shell-login[_ngcontent-%COMP%] > .container-login[_ngcontent-%COMP%] > .login-form-container[_ngcontent-%COMP%]{padding:3rem;width:100%;flex-grow:3;display:flex;flex-direction:column}.shell-login[_ngcontent-%COMP%] > .container-login[_ngcontent-%COMP%] > .login-footer[_ngcontent-%COMP%]{padding:2rem;width:100%;flex-grow:1;display:flex;flex-direction:column;justify-content:center;align-items:center;border:1px solid rgb(215,215,215);background-color:#f7f7f7;border-radius:0 0 8px 8px}h4[_ngcontent-%COMP%]{font-weight:700}h5[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-size:20px;color:#222;text-align:center}@media only screen and (max-width: 720px){.container-login[_ngcontent-%COMP%]{max-width:350px!important}}.loading[_ngcontent-%COMP%]{opacity:.2!important}"]}),i})();class y{static MustMatch(l,t){return s=>{const a=s.controls[l],n=s.controls[t];return n.setErrors(a.dirty&&n.dirty&&a.value!==n.value?{wrongPassword:!0}:null),null}}static patternValidator(l,t){return s=>s.value?l.test(s.value)?null:t:null}}var X=d(1308);let ee=(()=>{class i{constructor(t){this.dataService=t}createNewPassword(t){return this.dataService.post("/passManagement/changePassword",t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(X.D))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var L=d(1997);function te(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," New Password is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function se(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," * Password Must be at least 8 characters long. "),e.qZA())}function re(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," * The password must contain at least one upper case letter "),e.qZA())}function ie(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," * The password must contain at least one lower case letter "),e.qZA())}function ae(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," * The password must contain at least one digit "),e.qZA())}function ne(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," * The password must contain at least one special character "),e.qZA())}function le(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Confirm Password is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function oe(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Confirm Password "),e.TgZ(2,"strong"),e._uU(3,"is not equal"),e.qZA(),e._uU(4," New Password "),e.qZA())}const ce=[{path:"sign-in",component:K},{path:"new-password",component:(()=>{class i{constructor(t,s,a,n,h){this.fb=t,this.createPassService=s,this.toasterService=a,this.router=n,this.cookieService=h,this.confirmHide=!0,this.newHide=!0,this.hide=!0,this.submitted=!1}ngOnInit(){this.creatChangePasswordForm()}creatChangePasswordForm(){this.newPasswordForm=this.fb.group({newPassword:["",[m.kI.required,m.kI.minLength(8),y.patternValidator(/\d/,{hasNumber:!0}),y.patternValidator(/[A-Z]/,{hasUpper:!0}),y.patternValidator(/[a-z]/,{hasLower:!0}),y.patternValidator(/[!@#$%^&*(),.?":{}|<>]/,{hasSpecial:!0})]],confirmPassword:["",[m.kI.required]]},{validator:y.MustMatch("newPassword","confirmPassword")})}submit(){this.createPassService.createNewPassword({newPassword:this.newPasswordForm.controls.newPassword.value}).subscribe(t=>{t.success?(this.cookieService.delete("newPass","/"),this.router.navigate(["/authorization/sign-in"]),this.toasterService.showSuccess("Changed Successfully","New password")):this.toasterService.showError("Error Happened","New password")},t=>{this.toasterService.showError("Error Happened","Password")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.qu),e.Y36(ee),e.Y36(H._),e.Y36(M.F0),e.Y36(T.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-password"]],decls:39,vars:21,consts:[[1,"container","newPassForm"],[1,"mt-5","col-sm-12","col-md-6","mx-auto","text-center"],[1,"fw-bold","text-center","mt-3",2,"font-size","46px"],[1,"col-sm-12","col-md-6","mx-auto",3,"formGroup","ngSubmit"],[1,"row","justify-content-center","h-100"],[1,"example-card","px-5","mt-2"],[1,"d-flex","justify-content-center"],["src","assets/ismileico.png","alt","logo",1,"pt-2"],["appearance","legacy",1,"w-100"],["matInput","","formControlName","newPassword",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[4,"ngIf"],["appearance","legacy",1,"w-100","mt-4"],["matInput","","formControlName","confirmPassword",3,"type"],["appearance","legacy",1,"example-full-width","text-center"],["mat-button","","id","login","type","submit",1,"btn-material","btn","shift-submit","mt-3","d-block","mb-2","mx-auto",3,"disabled"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Create New Password"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Your Password has expired. Please create a new password."),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Your new password must be different from previously used passwords"),e.qZA()(),e.TgZ(8,"form",3),e.NdJ("ngSubmit",function(){return s.submit()}),e.TgZ(9,"div",4)(10,"mat-card",5)(11,"div",6),e._UZ(12,"img",7),e.qZA(),e.TgZ(13,"mat-form-field",8)(14,"mat-label"),e._uU(15,"New Password"),e.qZA(),e._UZ(16,"input",9),e.TgZ(17,"button",10),e.NdJ("click",function(){return s.newHide=!s.newHide}),e.TgZ(18,"mat-icon"),e._uU(19),e.qZA()(),e.YNc(20,te,4,0,"mat-error",11),e.qZA(),e.YNc(21,se,2,0,"mat-error",11),e.YNc(22,re,2,0,"mat-error",11),e.YNc(23,ie,2,0,"mat-error",11),e.YNc(24,ae,2,0,"mat-error",11),e.YNc(25,ne,2,0,"mat-error",11),e.TgZ(26,"mat-form-field",12)(27,"mat-label"),e._uU(28,"Confirm Password"),e.qZA(),e._UZ(29,"input",13),e.TgZ(30,"button",10),e.NdJ("click",function(){return s.confirmHide=!s.confirmHide}),e.TgZ(31,"mat-icon"),e._uU(32),e.qZA()(),e.YNc(33,le,4,0,"mat-error",11),e.YNc(34,oe,5,0,"mat-error",11),e.qZA(),e.TgZ(35,"mat-card-actions",14)(36,"button",15),e._uU(37),e.ALo(38,"translate"),e.qZA()()()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",s.newPasswordForm),e.xp6(8),e.Q6J("type",s.newHide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",s.newHide),e.xp6(2),e.Oqu(s.newHide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.newPassword.hasError("required")),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.newPassword.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.newPassword.hasError("hasUpper")),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.newPassword.hasError("hasLower")),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.newPassword.hasError("hasNumber")),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.newPassword.hasError("hasSpecial")),e.xp6(4),e.Q6J("type",s.confirmHide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",s.confirmHide),e.xp6(2),e.Oqu(s.confirmHide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.confirmPassword.hasError("required")),e.xp6(1),e.Q6J("ngIf",s.newPasswordForm.controls.confirmPassword.hasError("wrongPassword")),e.xp6(2),e.Q6J("disabled",s.newPasswordForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(38,19,"Reset Password")," "))},dependencies:[N.O5,S.TO,S.KE,S.hX,S.R9,F.Nt,$.lW,L.a8,L.hq,j.Hw,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,P.X$],styles:[".newPassForm[_ngcontent-%COMP%]{overflow:hidden}"]}),i})(),canActivate:[(()=>{class i{constructor(t,s){this.router=t,this.cookieService=s}canActivate(t,s){return!!this.cookieService.get("newPass")||(this.router.navigate(["/authorization/sign-in"]),!1)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(M.F0),e.LFG(T.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()]}];let he=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[M.Bz.forChild(ce),M.Bz]}),i})();var ue=d(6473);const q=new e.OlP("ngx-mask config"),U=new e.OlP("new ngx-mask config"),J=new e.OlP("initial ngx-mask config"),pe={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new e.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}};let me=(()=>{class i{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(s,a,n,h)=>{let g=[],r="";if(Array.isArray(n)){const v=new RegExp(n.map(f=>"[\\^$.|?*+()".indexOf(f)>=0?`\\${f}`:f).join("|"));g=s.split(v),r=s.match(v)?.[0]??""}else g=s.split(n),r=n;const o=g.length>1?`${r}${g[1]}`:"";let p=g[0]??"";const k=this.separatorLimit.replace(/\s/g,"");k&&+k&&(p="-"===p[0]?`-${p.slice(1,p.length).slice(0,k.length)}`:p.slice(0,k.length));const _=/(\d+)(\d{3})/;for(;a&&_.test(p);)p=p.replace(_,"$1"+a+"$2");return void 0===h?p+o:0===h?p:p+o.substring(0,h+1)},this.percentage=s=>Number(s)>=0&&Number(s)<=100,this.getPrecision=s=>{const a=s.split(".");return a.length>1?Number(a[a.length-1]):1/0},this.checkAndRemoveSuffix=s=>{for(let a=this.suffix?.length-1;a>=0;a--){const n=this.suffix.substring(a,this.suffix?.length);if(s.includes(n)&&a!==this.suffix?.length-1&&(a-1<0||!s.includes(this.suffix.substring(a-1,this.suffix?.length))))return s.replace(n,"")}return s},this.checkInputPrecision=(s,a,n)=>{if(a<1/0){if(Array.isArray(n)){const o=n.find(p=>p!==this.thousandSeparator);n=o||n[0]}const h=new RegExp(this._charToRegExpExpression(n)+`\\d{${a}}.*$`),r=(s.match(h)??[])[0]?.length??0;r-1>a&&(s=s.substring(0,s.length-(r-1-a))),0===a&&this._compareOrIncludes(s[s.length-1],n,this.thousandSeparator)&&(s=s.substring(0,s.length-1))}return s},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,s){const[a,n]=s;return this.customPattern=n,this.applyMask(t,a)}applyMask(t,s,a=0,n=!1,h=!1,g=(()=>{})){if(!s||"string"!=typeof t)return"";let r=0,o="",p=!1,k=!1,_=1,v=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&t?.length>0&&(t=this.checkAndRemoveSuffix(t));const f=t.toString().split("");if("IP"===s){const u=t.split(".");this.ipError=this._validIP(u),s="099.099.099.099"}const b=[];for(let u=0;u<t.length;u++)t[u]?.match("\\d")&&b.push(t[u]??"");if("CPF_CNPJ"===s&&(this.cpfCnpjError=11!==b.length&&14!==b.length,s=b.length>11?"00.000.000/0000-00":"000.000.000-00"),s.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const u=this.getPrecision(s);t=this.checkInputPrecision(t,u,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),o=this.percentage(t)?t:t.substring(0,t.length-1)}else if(s.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&t[1]!==this.thousandSeparator&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!h?t.slice(0,t.length-1):t,h&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const u=this._charToRegExpExpression(this.thousandSeparator);let c='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(u,"");if(Array.isArray(this.decimalMarker))for(const C of this.decimalMarker)c=c.replace(this._charToRegExpExpression(C),"");else c=c.replace(this._charToRegExpExpression(this.decimalMarker),"");const w=new RegExp("["+c+"]");(t.match(w)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const E=this.getPrecision(s),Z=(t=this.checkInputPrecision(t,E,this.decimalMarker)).replace(new RegExp(u,"g"),"");o=this._formatWithSeparators(Z,this.thousandSeparator,this.decimalMarker,E);const R=o.indexOf(",")-t.indexOf(","),x=o.length-t.length;if(x>0&&","!==o[a]){k=!0;let C=0;do{this._shift.add(a+C),C++}while(C<x)}else 0!==R&&a>0&&!(o.indexOf(",")>=a&&a>3)||!(o.indexOf(".")>=a&&a>3)&&x<=0?(this._shift.clear(),k=!0,_=x,this._shift.add(a+=x)):this._shift.clear()}else for(let u=0,c=f[0];u<f.length&&r!==s.length;u++,c=f[u]??"")if(this._checkSymbolMask(c,s[r]??"")&&"?"===s[r+1])o+=c,r+=2;else if("*"===s[r+1]&&p&&this._checkSymbolMask(c,s[r+2]??""))o+=c,r+=3,p=!1;else if(this._checkSymbolMask(c,s[r]??"")&&"*"===s[r+1])o+=c,p=!0;else if("?"===s[r+1]&&this._checkSymbolMask(c,s[r+2]??""))o+=c,r+=3;else if(this._checkSymbolMask(c,s[r]??"")){if("H"===s[r]&&Number(c)>2){r+=1,this._shiftStep(s,r,f.length),u--,this.leadZeroDateTime&&(o+="0");continue}if("h"===s[r]&&"2"===o&&Number(c)>3){r+=1,u--;continue}if("m"===s[r]&&Number(c)>5){r+=1,this._shiftStep(s,r,f.length),u--,this.leadZeroDateTime&&(o+="0");continue}if("s"===s[r]&&Number(c)>5){r+=1,this._shiftStep(s,r,f.length),u--,this.leadZeroDateTime&&(o+="0");continue}const w=31;if("d"===s[r]&&(Number(c)>3&&this.leadZeroDateTime||Number(t.slice(r,r+2))>w||"/"===t[r+1])){r+=1,this._shiftStep(s,r,f.length),u--,this.leadZeroDateTime&&(o+="0");continue}if("M"===s[r]){const Z=0===r&&(Number(c)>2||Number(t.slice(r,r+2))>12||"/"===t[r+1]),R=t.slice(r-3,r-1).includes("/")&&("/"===t[r-2]&&Number(t.slice(r-1,r+1))>12&&"/"!==t[r]||"/"===t[r]||"/"===t[r-3]&&Number(t.slice(r-2,r))>12&&"/"!==t[r-1]||"/"===t[r-1]),x=Number(t.slice(r-3,r-1))<=w&&!t.slice(r-3,r-1).includes("/")&&"/"===t[r-1]&&(Number(t.slice(r,r+2))>12||"/"===t[r+1]),C=Number(t.slice(r-3,r-1))>w&&!t.slice(r-3,r-1).includes("/")&&!t.slice(r-2,r).includes("/")&&Number(t.slice(r-2,r))>12,_e=Number(t.slice(r-3,r-1))<=w&&!t.slice(r-3,r-1).includes("/")&&"/"!==t[r-1]&&Number(t.slice(r-1,r+1))>12;if(Number(c)>1&&this.leadZeroDateTime||Z||R||x||C||_e){r+=1,this._shiftStep(s,r,f.length),u--,this.leadZeroDateTime&&(o+="0");continue}}o+=c,r++}else" "===c&&" "===s[r]?(o+=c,r++):-1!==this.maskSpecialCharacters.indexOf(s[r]??"")?(o+=s[r],r++,this._shiftStep(s,r,f.length),u--):this.maskSpecialCharacters.indexOf(c)>-1&&this.maskAvailablePatterns[s[r]??""]&&this.maskAvailablePatterns[s[r]??""]?.optional?(!!f[r]&&"099.099.099.099"!==s&&"000.000.000-00"!==s&&"00.000.000/0000-00"!==s&&!s.match(/^9+\.0+$/)&&(o+=f[r]),r++,u--):"*"===this.maskExpression[r+1]&&this._findSpecialChar(this.maskExpression[r+2]??"")&&this._findSpecialChar(c)===this.maskExpression[r+2]&&p||"?"===this.maskExpression[r+1]&&this._findSpecialChar(this.maskExpression[r+2]??"")&&this._findSpecialChar(c)===this.maskExpression[r+2]&&p?(r+=3,o+=c):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(c)<0&&c!==this.placeHolderCharacter&&(v=!0);o.length+1===s.length&&-1!==this.maskSpecialCharacters.indexOf(s[s.length-1]??"")&&(o+=s[s.length-1]);let A=a+1;for(;this._shift.has(A);)_++,A++;let I=n&&!s.startsWith("separator")?r:this._shift.has(a)?_:0;v&&I--,g(I,k),_<0&&this._shift.clear();let V=!1;h&&(V=f.every(u=>this.maskSpecialCharacters.includes(u)));let O=`${this.prefix}${V?"":o}${this.suffix}`;return 0===o.length&&(O=`${this.prefix}${o}`),O}_findSpecialChar(t){return this.maskSpecialCharacters.find(s=>s===t)}_checkSymbolMask(t,s){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,(this.maskAvailablePatterns[s]?.pattern&&this.maskAvailablePatterns[s]?.pattern.test(t))??!1}_stripToDecimal(t){return t.split("").filter((s,a)=>{const n="string"==typeof this.decimalMarker?s===this.decimalMarker:this.decimalMarker.includes(s);return s.match("^-?\\d")||s===this.thousandSeparator||n||"-"===s&&0===a&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,s,a){const n=/[*?]/g.test(t.slice(0,s))?a:s;this._shift.add(n+this.prefix.length||0)}_compareOrIncludes(t,s,a){return Array.isArray(s)?s.filter(n=>n!==a).includes(t):t===s}_validIP(t){return!(4===t.length&&!t.some((s,a)=>t.length!==a+1?""===s||Number(s)>255:""===s||Number(s.substring(0,3))>255))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(q))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function de(i,l){return l instanceof Function?{...i,...l()}:{...i,...l}}let fe=(()=>{class i{static forRoot(t){return{ngModule:i,providers:[{provide:U,useValue:t},{provide:J,useValue:pe},{provide:q,useFactory:de,deps:[J,U]},me]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();const Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};Y.KeyboardEvent||(Y.KeyboardEvent=function(i,l){});const ge=()=>({validation:!0});let ke=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[N.ez,he,ue.h,m.UX,m.u5,fe.forRoot(ge),P.aw,m.u5]}),i})()}}]);